{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/aazibi/Learn_ReactJS/MoviesAndMe/components/search.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport FilmItem from \"./film_item\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { getFilmwithAPI } from \"../API/TDMBapi\";\nimport FilmList from \"./film_list\";\n\nvar Search = function (_React$Component) {\n  _inherits(Search, _React$Component);\n\n  var _super = _createSuper(Search);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _super.call(this, props);\n\n    _this._displayDetailForFilm = function (idFilm) {\n      _this.props.navigation.navigate(\"FilmDetail\", {\n        idFilm: idFilm\n      });\n    };\n\n    _this.searchedText = '';\n    _this.page = 0;\n    _this.totalpages = 0;\n    _this.state = {\n      films: [],\n      isLoading: false\n    };\n    _this._loadFilms = _this._loadFilms.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"_loadFilms\",\n    value: function _loadFilms() {\n      var _this2 = this;\n\n      if (this.searchedText.length > 0) {\n        this.setState({\n          isLoading: true\n        });\n        getFilmwithAPI(this.searchedText, this.page + 1).then(function (data) {\n          _this2.page = data.page;\n          _this2.totalpages = data.total_pages;\n\n          _this2.setState({\n            films: _this2.state.films.concat(data.results),\n            isLoading: false\n          });\n        });\n      }\n    }\n  }, {\n    key: \"_searchTextInputChanged\",\n    value: function _searchTextInputChanged(text) {\n      this.searchedText = text;\n    }\n  }, {\n    key: \"_displayLoading\",\n    value: function _displayLoading() {\n      if (this.state.isLoading) {\n        return React.createElement(View, {\n          style: styles.loading_container,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 17\n          }\n        }, React.createElement(ActivityIndicator, {\n          size: \"large\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }\n        }));\n      }\n    }\n  }, {\n    key: \"_searchFilms\",\n    value: function _searchFilms() {\n      var _this3 = this;\n\n      this.pages = 0;\n      this.totalpages = 0;\n      this.setState({\n        films: []\n      }, function () {\n        _this3._loadFilms();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(View, {\n        style: styles.main_container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, React.createElement(TextInput, {\n        style: styles.textinput,\n        placeholder: \"Titre du Film\",\n        onChangeText: function onChangeText(text) {\n          return _this4._searchTextInputChanged(text);\n        },\n        onSubmitEditing: function onSubmitEditing() {\n          return _this4._searchFilms();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }), React.createElement(Button, {\n        title: \"Rechercher\",\n        onPress: function onPress() {\n          return _this4._searchFilms();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }), React.createElement(FilmList, {\n        films: this.state.films,\n        navigation: this.props.navigation,\n        loadFilms: this._loadFilms,\n        page: this.page,\n        totalpages: this.totalpages,\n        favoriteList: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }), this._displayLoading());\n    }\n  }]);\n\n  return Search;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  main_container: {\n    flex: 1\n  },\n  textinput: {\n    marginLeft: 5,\n    marginRight: 5,\n    height: 50,\n    borderColor: '#000000',\n    borderWidth: 1,\n    paddingLeft: 5\n  },\n  loading_container: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 100,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default Search;","map":{"version":3,"sources":["/home/aazibi/Learn_ReactJS/MoviesAndMe/components/search.js"],"names":["React","FilmItem","getFilmwithAPI","FilmList","Search","props","_displayDetailForFilm","idFilm","navigation","navigate","searchedText","page","totalpages","state","films","isLoading","_loadFilms","bind","length","setState","then","data","total_pages","concat","results","text","styles","loading_container","pages","main_container","textinput","_searchTextInputChanged","_searchFilms","_displayLoading","Component","StyleSheet","create","flex","marginLeft","marginRight","height","borderColor","borderWidth","paddingLeft","position","left","right","top","bottom","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport FilmItem from './film_item'\nimport { StyleSheet, View, TextInput, Button, FlatList, ActivityIndicator } from 'react-native'\nimport { getFilmwithAPI } from '../API/TDMBapi'\nimport FilmList from './film_list'\n\nclass Search extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.searchedText = ''\n        this.page = 0\n        this.totalpages = 0\n        this.state = {\n            films: [],\n            isLoading: false\n        }\n        this._loadFilms = this._loadFilms.bind(this)\n    }\n\n    _displayDetailForFilm = (idFilm) => {\n        this.props.navigation.navigate(\"FilmDetail\", { idFilm: idFilm })\n    }\n\n    _loadFilms() {\n        if (this.searchedText.length > 0) {\n            this.setState({ isLoading: true })\n            getFilmwithAPI(this.searchedText, (this.page+1)).then(data => {\n                this.page = data.page\n                this.totalpages = data.total_pages\n                this.setState({\n                    films: this.state.films.concat(data.results),\n                    isLoading: false\n                })\n            })\n        }\n    }\n\n    _searchTextInputChanged(text) {\n        this.searchedText = text;\n    }\n\n    _displayLoading() {\n        if (this.state.isLoading) {\n            return (\n                <View style={styles.loading_container}>\n                    <ActivityIndicator size='large' />\n                </View>\n            )\n        }\n    }\n\n    _searchFilms() {\n        this.pages = 0\n        this.totalpages = 0\n        this.setState({\n            films: [],\n        }, () => {\n            this._loadFilms()\n        })\n    }\n\n    render() {\n        return (\n            <View style={styles.main_container}>\n                <TextInput\n                    style={styles.textinput}\n                    placeholder='Titre du Film'\n                    onChangeText={(text) => this._searchTextInputChanged(text)}\n                    onSubmitEditing={() => this._searchFilms()}\n                />\n                <Button title='Rechercher' onPress={() => this._searchFilms()}/>\n                <FilmList\n                    films = {this.state.films}\n                    navigation = {this.props.navigation}\n                    loadFilms = {this._loadFilms}\n                    page = {this.page}\n                    totalpages = {this.totalpages}\n                    favoriteList = {false}\n                />\n                {this._displayLoading()}\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create ({\n    main_container: {\n        flex: 1\n    },\n    textinput: {\n        marginLeft: 5,\n        marginRight: 5,\n        height: 50,\n        borderColor: '#000000',\n        borderWidth: 1,\n        paddingLeft: 5\n    },\n    loading_container: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        top: 100,\n        bottom: 0,\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n})\n\nexport default Search"]},"metadata":{},"sourceType":"module"}